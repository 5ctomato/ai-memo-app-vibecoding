# Story 2.2: 노트 목록 조회, 페이지네이션 및 정렬

## Status
Draft

## Story
**As a** 사용자,
**I want** 노트 목록을 조회하고 페이지네이션 및 정렬 기능을 사용할 수 있도록,
**so that** 많은 노트들을 효율적으로 탐색하고 관리할 수 있다

## Acceptance Criteria

1. **노트 목록 조회**
   - 사용자의 모든 노트를 목록 형태로 표시
   - 각 노트는 제목, 미리보기, 생성일시, 수정일시를 표시
   - 노트가 없을 때는 빈 상태 UI 표시

2. **페이지네이션**
   - 한 페이지당 10개 노트 표시 (기본값)
   - 페이지 번호 또는 무한 스크롤 방식 제공
   - 총 노트 수 및 현재 페이지 정보 표시

3. **정렬 기능**
   - 최신순 (기본값): 최근 수정일시 기준 내림차순
   - 제목순: 제목 기준 오름차순
   - 생성일시순: 생성일시 기준 내림차순
   - 정렬 옵션 변경 시 즉시 반영

4. **반응형 디자인**
   - 모바일, 태블릿, 데스크톱에서 모두 최적화된 레이아웃
   - 터치 친화적인 인터페이스

5. **성능 최적화**
   - 노트 목록 로딩 시간 2초 이내
   - 페이지네이션 시 부드러운 전환
   - 정렬 변경 시 빠른 응답

## Tasks / Subtasks

- [ ] 노트 목록 조회 Server Action 구현 (AC: 1)
  - [ ] 사용자별 노트 조회 쿼리 작성
  - [ ] 페이지네이션 파라미터 처리
  - [ ] 정렬 옵션 처리
  - [ ] 총 노트 수 조회

- [ ] 노트 목록 UI 컴포넌트 구현 (AC: 1, 4)
  - [ ] 노트 카드 컴포넌트 생성
  - [ ] 노트 목록 컨테이너 컴포넌트
  - [ ] 빈 상태 UI 컴포넌트
  - [ ] 로딩 상태 UI

- [ ] 페이지네이션 컴포넌트 구현 (AC: 2)
  - [ ] 페이지 번호 표시
  - [ ] 이전/다음 버튼
  - [ ] 페이지 이동 로직
  - [ ] 현재 페이지 하이라이트

- [ ] 정렬 기능 구현 (AC: 3)
  - [ ] 정렬 옵션 드롭다운/버튼
  - [ ] 정렬 상태 관리
  - [ ] 정렬 변경 시 URL 업데이트
  - [ ] 정렬 아이콘 표시

- [ ] 노트 목록 페이지 구현 (AC: 1, 2, 3, 4)
  - [ ] `/notes` 페이지 생성
  - [ ] URL 파라미터 처리 (페이지, 정렬)
  - [ ] 컴포넌트 통합
  - [ ] 에러 처리

- [ ] 성능 최적화 (AC: 5)
  - [ ] 데이터베이스 인덱스 최적화
  - [ ] 쿼리 성능 개선
  - [ ] 클라이언트 사이드 캐싱
  - [ ] 로딩 상태 최적화

- [ ] 단위 테스트 작성
  - [ ] Server Action 테스트
  - [ ] 컴포넌트 테스트
  - [ ] 페이지네이션 로직 테스트
  - [ ] 정렬 기능 테스트

## Dev Notes

### 데이터 모델
- **notes 테이블**: `id`, `userId`, `title`, `content`, `isArchived`, `createdAt`, `updatedAt`
- **정렬 필드**: `createdAt`, `updatedAt`, `title`
- **페이지네이션**: `LIMIT`과 `OFFSET` 사용

### API 스펙
```typescript
// Server Action
async function getNotes(params: {
  page?: number;
  limit?: number;
  sortBy?: 'createdAt' | 'updatedAt' | 'title';
  sortOrder?: 'asc' | 'desc';
}) {
  // 반환값: { notes: Note[], totalCount: number, totalPages: number }
}
```

### 컴포넌트 구조
```
/notes/page.tsx (메인 페이지)
├── components/notes/
│   ├── NotesList.tsx (목록 컨테이너)
│   ├── NoteCard.tsx (개별 노트 카드)
│   ├── Pagination.tsx (페이지네이션)
│   ├── SortOptions.tsx (정렬 옵션)
│   └── EmptyState.tsx (빈 상태)
```

### 파일 위치
- **Server Action**: `lib/actions/notes.ts`
- **페이지**: `app/notes/page.tsx`
- **컴포넌트**: `components/notes/`
- **테스트**: `__tests__/notes/`

### 기술적 제약사항
- DrizzleORM을 사용한 데이터베이스 쿼리
- Next.js App Router 사용
- shadcn/ui 컴포넌트 활용
- Tailwind CSS 스타일링
- TypeScript 사용

### Testing
- **테스트 위치**: `__tests__/notes/`
- **테스트 프레임워크**: Jest + React Testing Library
- **테스트 범위**: 
  - Server Action 단위 테스트
  - 컴포넌트 렌더링 테스트
  - 사용자 상호작용 테스트
  - 페이지네이션 로직 테스트
  - 정렬 기능 테스트

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-14 | 1.0 | 초기 스토리 생성 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### Debug Log References
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### Completion Notes List
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### File List
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

## QA Results
*이 섹션은 QA 에이전트가 검토 후에 채워집니다*
