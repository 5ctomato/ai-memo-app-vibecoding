# Story 2.3: 노트 상세 조회

## Status
Draft

## Story
**As a** 사용자,
**I want** 특정 노트의 상세 내용을 조회할 수 있도록,
**so that** 노트의 전체 내용을 읽고 편집할 수 있다

## Acceptance Criteria

1. **노트 상세 조회**
   - 노트 제목, 본문, 생성일시, 수정일시를 모두 표시
   - 노트가 존재하지 않을 때 404 에러 페이지 표시
   - 보관된 노트는 별도 표시

2. **네비게이션**
   - 목록으로 돌아가기 버튼 제공
   - 이전/다음 노트로 이동하는 버튼 (선택사항)
   - 브레드크럼 네비게이션

3. **반응형 디자인**
   - 모바일, 태블릿, 데스크톱에서 모두 최적화된 레이아웃
   - 긴 텍스트의 경우 적절한 줄바꿈 및 스크롤 처리

4. **로딩 상태**
   - 노트 로딩 중 스켈레톤 UI 표시
   - 에러 발생 시 사용자 친화적 메시지 표시

5. **접근성**
   - 키보드 네비게이션 지원
   - 스크린 리더 호환성
   - 적절한 ARIA 라벨 제공

## Tasks / Subtasks

- [ ] 노트 상세 조회 Server Action 구현 (AC: 1)
  - [ ] 노트 ID로 단일 노트 조회 쿼리 작성
  - [ ] 노트 존재 여부 검증
  - [ ] 보관된 노트 처리

- [ ] 노트 상세 페이지 구현 (AC: 1, 2, 3)
  - [ ] `/notes/[id]` 동적 라우트 생성
  - [ ] 노트 상세 정보 표시 컴포넌트
  - [ ] 404 에러 페이지 처리
  - [ ] 보관된 노트 표시

- [ ] 네비게이션 컴포넌트 구현 (AC: 2)
  - [ ] 목록으로 돌아가기 버튼
  - [ ] 브레드크럼 네비게이션
  - [ ] 이전/다음 노트 버튼 (선택사항)

- [ ] 로딩 및 에러 상태 처리 (AC: 4)
  - [ ] 스켈레톤 로딩 UI
  - [ ] 에러 바운더리 컴포넌트
  - [ ] 사용자 친화적 에러 메시지

- [ ] 접근성 개선 (AC: 5)
  - [ ] 키보드 네비게이션 지원
  - [ ] ARIA 라벨 추가
  - [ ] 포커스 관리

- [ ] 단위 테스트 작성
  - [ ] Server Action 테스트
  - [ ] 컴포넌트 테스트
  - [ ] 에러 케이스 테스트

## Dev Notes

### 데이터 모델
- **notes 테이블**: `id`, `userId`, `title`, `content`, `isArchived`, `createdAt`, `updatedAt`
- **조회 필드**: 모든 필드 조회 필요
- **인덱스**: `id` (Primary Key) 사용

### API 스펙
```typescript
// Server Action
async function getNoteById(noteId: string) {
  // 반환값: { success: boolean, data?: Note, error?: string }
}
```

### 컴포넌트 구조
```
/notes/[id]/page.tsx (동적 라우트)
├── components/notes/
│   ├── NoteDetail.tsx (노트 상세 정보)
│   ├── NoteNavigation.tsx (네비게이션)
│   ├── NoteSkeleton.tsx (로딩 상태)
│   └── NoteError.tsx (에러 상태)
```

### 파일 위치
- **Server Action**: `lib/actions/notes.ts`
- **페이지**: `app/notes/[id]/page.tsx`
- **컴포넌트**: `components/notes/`
- **테스트**: `__tests__/notes/`

### 기술적 제약사항
- DrizzleORM을 사용한 데이터베이스 쿼리
- Next.js App Router 동적 라우팅 사용
- shadcn/ui 컴포넌트 활용
- Tailwind CSS 스타일링
- TypeScript 사용

### Testing
- **테스트 위치**: `__tests__/notes/`
- **테스트 프레임워크**: Jest + React Testing Library
- **테스트 범위**: 
  - Server Action 단위 테스트
  - 컴포넌트 렌더링 테스트
  - 에러 케이스 테스트
  - 접근성 테스트

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-14 | 1.0 | 초기 스토리 생성 | Bob (SM) |

## Dev Agent Record

### Agent Model Used
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### Debug Log References
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### Completion Notes List
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

### File List
*이 섹션은 개발 에이전트가 구현 중에 채워집니다*

## QA Results
*이 섹션은 QA 에이전트가 검토 후에 채워집니다*



